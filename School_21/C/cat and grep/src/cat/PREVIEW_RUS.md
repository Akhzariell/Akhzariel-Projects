# Документация к утилите cat:

---

### Инструкции по сборке и запуску программы:

Сборка программы реализована с помощью утилиты `make` в соответствии с требованиями ТЗ.

| Цель:             | Описание:                                                                                                                                                             | Запуск:              |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- |
| **`all`**     | Сборка программы, проверка исходников на `clang-format`и авто-правка в случае нарушений.                      | `make`<br />`make all` |
| **`s21_cat`** | Сборка программы и авто-коррекция с использованием `clang-format`.                                                              | `make s21_cat`           |
| **`check`**   | Проверка исходного кода на наличие лишних пробелов, табуляций и других ошибок форматирования. | `make check`             |
| **`test`**    | Запуск тестов, расположенных в папке `TESTS`.                                                                                                | `make test`              |
| **`rebuild`** | Пересборка проекта с учетом всех новых изменений.                                                                                   | `make rebuild`           |
| **`clean`**   | Очистка объектных файлов и исполняемой программы.                                                                                  | `make clean`             |

---

### Краткое превью утилиты `cat` для тех, кто не читал ТЗ:

`cat` (сокращение от "concatenate") — это базовая утилита командной строки в Unix/Linux, используемая для работы с текстовыми файлами. Основная функция утилиты — считывание содержимого одного или нескольких файлов и вывод этого содержимого в стандартный поток (обычно в терминал). Часто используется для объединения файлов или для просмотра их содержимого.

Утилита поддерживает несколько опций, которые позволяют изменять формат вывода. Эти опции представлены в таблице ниже:

| **Флаг** | **Описание:**                                                                                                                                   | **Не декодирует (исключения):**                                 |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- |
| `-n`             | Нумерует все строки, включая пустые.                                                                                            | -                                                                                           |
| `-b`             | Нумерует только непустые строки.                                                                                                  | -                                                                                           |
| `-s`             | Удаляет подряд идущие пустые строки, оставляя только одну.                                                   | -                                                                                           |
| `-E`             | Добавляет символ `$` в конце каждой строки, чтобы показать конец строки (*символ `\n`*). | Все остальные системные символы и табуляции.          |
| `-e`             | Комбинирует:`-E` (*добавляет `$`*) и `-v` (*выводит непечатные символы*).                              | Табуляции (`\t`).                                                                |
| `-v`             | Показывает непечатные символы (*ASCII 0–31 и 127*) в читаемом виде.                                               | Табуляции (`\t`) и перенос строки (`\n`).                        |
| `-T`             | Делает табуляцию (`\t`) видимой, отображая ее как `^I`.                                                               | Все остальные системные символы и перенос строки. |
| `-t`             | Комбинирует:`-T` (*отображение табуляции как `^I`*) и `-v` (*вывод непечатных символов*). | Перенос строки (`\n`).                                                       |

---

### Структура проекта и алгоритм работы программы:

---

#### Структура папки `src`:

| Папки:                                | Файлы:                                              | Описание:                                                                                                                                                                                                                                                                  |
| ------------------------------------------ | -------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **TESTS**                            | 1.`3.csv`<br />2.`bytes.txt`<br />3.`test.sh`      | 1. Простой тест на вывод;<br />2. Файл с системными символами для проверки декодирования;<br />3. Скрипт для запуска тестов.                                                               |
| **src**(основная папка) | 1.`Makefile`<br />2.`s21_cat.c`<br />3.`s21_cat.h` | 1. Makefile для сборки, очистки, ребилда и запуска тестов;<br />2. Основной `.c` файл с реализацией утилиты;<br />3. Основной `.h` файл с библиотеками и структурами. |

Программа состоит из двух файлов: `s21_cat.c` и `s21_cat.h`.

| Файл      | Содержание                                                                                           |
| ------------- | -------------------------------------------------------------------------------------------------------------- |
| `s21_cat.c` | 1. Функции для работы с утилитой;<br />2. Функция `main` программы. |
| `s21_cat.h` | 1. Библиотеки и структуры.                                                                 |

Функции не разбиты на отдельные библиотеки или файлы, поскольку ТЗ этого не требует. Подробные комментарии о функционале кода можно найти непосредственно в самих файлах.

#### Использование библиотеки `#include <getopt.h>`:

Для парсинга аргументов командной строки (`int argc, char* argv[]`) используется библиотека `getopt.h`. В данном проекте использован стандартный `getopt`, так как в ТЗ нет требований к использованию `getopt_long`.

#### Варианты работы утилиты `cat`:

Ниже приведены варианты работы утилиты:

| Вариант               | Описание:                                                                                                 |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| `cat`                      | Запускает бесконечный цикл.                                                               |
| `cat [-flag]`              | Запускает бесконечный цикл с подключенной опцией.                      |
| `cat file`                 | Выводит содержимое файла в `stdout`.                                                     |
| `cat [-flag] file`         | Выводит содержимое файла в `stdout`с дополнительными функциями. |
| `cat file file > test.txt` | Объединяет несколько файлов в один (конкатенация).                      |

Важно помнить, что флаги и файлы могут быть указаны в любом порядке. Например, комбинация `cat -n file1 file2` и `cat file1 -n file2` будет работать одинаково.

#### Логика работы функции `main`:

В функции `main` программа проверяет количество переданных аргументов (`argc`). Если `argc == 1`, программа запускает бесконечный цикл с выводом в поток `stdout`. Если аргументов больше, запускается проверка на наличие опций.

Если переданы опции (`cats.none == 1`), запускается алгоритм обработки флагов. Если флаг есть, но файл не передан, программа продолжает работать с опцией. Если опций нет (`cats.none == 0`), программа работает исключительно с файлами.

**Подробнее о логике работы можно посмотреть на доске miro.**

---

### Дополнительная информация:

Данная программа **НЕ ПОДДЕРЖИВАЕТ** несколько флагов одновременно, в отличие от команды `grep` (это не требовалось по ТЗ).

Код не является кросс-платформенным (это не было требованием ТЗ). Он был написан и проверен на Ubuntu, и может не работать корректно на других операционных системах.
